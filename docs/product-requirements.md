# プロダクト要求定義書 (Product Requirements Document)

## プロダクト概要

### 名称
**Badminton Event Hub** - 宮城県バドミントン練習会マッチングプラットフォーム

### プロダクトコンセプト
- **練習会の発見と参加をシンプルに**: 地域のバドミントン練習会を簡単に検索・申請でき、レベルや日程で自分に合った練習会を見つけられる
- **主催者の運営負荷を最小化**: 参加申請の管理、参加者とのコミュニケーション、イベント作成を一元化し、主催者の運営業務を効率化する
- **安心・安全なコミュニティ形成**: 申請承認制とブロック機能により、主催者が参加者を適切に管理でき、健全なバドミントンコミュニティを育成する

### プロダクトビジョン
宮城県内のバドミントン愛好者が、レベルや地域に関わらず気軽に練習会を見つけて参加できるプラットフォームを提供する。
主催者にとっては最小限の手間でイベントを運営でき、参加者にとってはワンクリックで申請が完了する。
リアルタイムチャットとメール通知により、主催者と参加者の円滑なコミュニケーションを実現する。
最終的に、宮城県のバドミントンコミュニティの活性化と、競技人口の拡大に貢献する。

### 目的
- 宮城県内のバドミントン練習会情報を集約し、発見可能性を高める
- 主催者の参加者管理業務（申請受付・承認・連絡）を効率化する
- レベル別フィルタリングにより、参加者が自分に合った練習会を見つけやすくする
- 承認制・ブロック機能により、安心して参加できる環境を整備する

## ターゲットユーザー

### プライマリーペルソナ1: 佐藤健太（32歳、会社員 / 練習会主催者）
- 仙台市在住、週1〜2回バドミントン練習会を主催
- 現在はLINEグループやSNSで参加者を募集しているが、管理が煩雑
- 毎回の参加者確認・連絡に多くの時間を費やしている
- 定員管理やレベルの不一致による問題に困っている
- **課題**: 参加者管理の手間を減らし、本来の練習に集中したい
- **期待**: 申請の一元管理、自動通知、レベルフィルタリングによる運営効率化

### プライマリーペルソナ2: 山田美咲（26歳、会社員 / 練習会参加者）
- 仙台市近郊在住、バドミントン歴3年（中級レベル）
- 新しい練習会を探しているが、SNSの情報が分散していて見つけにくい
- 自分のレベルに合った練習会かどうか事前に判断しにくい
- 知らない主催者の練習会に参加するのに不安がある
- **課題**: 自分のレベルに合った練習会を簡単に見つけて参加したい
- **期待**: レベル・地域での検索、主催者情報の確認、安心できる申請プロセス

## 成功指標（KPI）

### プライマリーKPI
- 月間アクティブイベント数: 20件以上（リリース6ヶ月後）
- イベントあたりの平均申請数: 3件以上（リリース6ヶ月後）
- 申請承認率: 70%以上

### セカンダリーKPI
- 月間新規ユーザー登録数: 30人以上（リリース6ヶ月後）
- リピート主催率（2回以上イベント作成）: 50%以上
- リピート参加率（2回以上申請）: 40%以上

## 機能要件

### コア機能（MVP）

#### 1. 認証・ユーザー管理

**ユーザーストーリー**:
バドミントン愛好者として、簡単にアカウントを作成してサービスを利用開始するために、メールまたはGoogleアカウントでの認証機能が欲しい

**受け入れ条件**:
- [ ] メール/パスワードによるサインアップ・ログインができる
- [ ] Google OAuthによるサインインができる
- [ ] メール登録時にメール認証が完了する
- [ ] 初回ログイン時にプロフィール設定画面へ誘導される
- [ ] 表示名を2〜20文字の範囲で設定・編集できる

**優先度**: P0（必須）

#### 2. イベント（練習会）作成

**ユーザーストーリー**:
練習会主催者として、効率的にイベントを作成・公開するために、必要な情報を入力してイベントを作成する機能が欲しい

**受け入れ条件**:
- [ ] 以下の項目を入力してイベントを作成できる
  - タイトル
  - 開始日時・終了日時
  - 会場名・住所
  - 市区町村（宮城県内38箇所から選択）
  - レベル選択（初心者/初級/中級/上級/すべてのレベル）+ 補足メモ（任意）
  - 定員（ビジター枠）
  - 参加費
  - 説明文、参加ルール、持ち物・装備、備考
  - 募集締切（任意: イベント開始の1〜72時間前から選択）
- [ ] 作成したイベントが一覧に表示される

**優先度**: P0（必須）

#### 3. イベント編集・コピー・キャンセル

**ユーザーストーリー**:
練習会主催者として、イベント情報を柔軟に管理するために、編集・コピー・キャンセル機能が欲しい

**受け入れ条件**:
- [ ] 主催者が全項目を編集できる
- [ ] イベント開始後は編集不可となる
- [ ] 既存イベントの情報をコピーして新規作成できる（日時以外をプリフィル）
- [ ] 主催者がイベントをキャンセルできる
- [ ] キャンセル時に承認済み参加者全員にメール通知が送信される

**優先度**: P0（必須）

#### 4. イベント検索・閲覧

**ユーザーストーリー**:
バドミントン愛好者として、自分に合った練習会を見つけるために、条件でフィルタリングしてイベントを検索する機能が欲しい

**受け入れ条件**:
- [ ] トップページにイベント一覧がカード形式で表示される
- [ ] 日付（今日/今週/来週/今月/来月/カスタム）でフィルタリングできる
- [ ] 市区町村でフィルタリングできる
- [ ] レベルでフィルタリングできる
- [ ] イベント詳細ページで全情報（残り枠数、主催者名含む）が表示される
- [ ] 申請ボタンが状態に応じて適切に表示される（申請可/保留中/承認済み/ブロック済み等）
- [ ] SEO対応（JSON-LD構造化データ、OGメタタグ）が実装されている

**優先度**: P0（必須）

#### 5. 申請管理

**ユーザーストーリー**:
参加者として、気になる練習会に参加申請するために、ワンクリックで申請できる機能が欲しい。
主催者として、参加者を適切に管理するために、申請の承認・拒否ができる機能が欲しい

**受け入れ条件**:
- [ ] 参加者がイベントに申請できる（任意コメント付き）
- [ ] 参加者が保留中・承認済みの申請をキャンセルできる
- [ ] 主催者が全申請を一覧表示できる（保留中/承認済み/拒否・キャンセル）
- [ ] 主催者が申請を承認できる（メール通知付き）
- [ ] 主催者が申請を拒否できる（メール通知付き）
- [ ] 拒否と同時にユーザーブロックを選択できる
- [ ] 以下の制約が適用される
  - 公開中のイベントのみ申請可能
  - 募集締切前のみ申請可能
  - ブロックされていないこと
  - 既存の保留中/承認済み申請がないこと
  - 残り枠があること
  - 自分のイベントには申請不可

**優先度**: P0（必須）

#### 6. チャット機能

**ユーザーストーリー**:
承認済み参加者として、イベントに関する質問や連絡をするために、主催者とリアルタイムでメッセージをやりとりする機能が欲しい

**受け入れ条件**:
- [ ] 承認済み参加者と主催者間で1対1チャットができる
- [ ] リアルタイムでメッセージが配信される
- [ ] メッセージ上限が500文字である
- [ ] クイックメッセージテンプレートが利用できる（「迷っています」「遅れます」「体調不良でキャンセル」等）
- [ ] 既読状態がトラッキングされる
- [ ] イベント終了後48時間でチャットが期限切れになる
- [ ] 新規メッセージ受信時にメール通知が送信される

**優先度**: P0（必須）

#### 7. ダッシュボード（主催者向け）

**ユーザーストーリー**:
練習会主催者として、自分のイベントと申請状況を一目で把握するために、ダッシュボード画面が欲しい

**受け入れ条件**:
- [ ] 今後のイベント一覧が表示される（ステータスバッジ、参加者数/定員、クイックアクション）
- [ ] 過去のイベント一覧が表示される（直近5件を折りたたみ表示）
- [ ] 保留中の申請数バッジが表示される
- [ ] イベントがない場合に作成誘導が表示される

**優先度**: P0（必須）

#### 8. マイページ（参加者向け）

**ユーザーストーリー**:
参加者として、自分の申請状況を確認するために、マイページ画面が欲しい

**受け入れ条件**:
- [ ] 申請一覧がステータス別に表示される（保留中/承認済み（今後）/承認済み（過去）/拒否/キャンセル）
- [ ] イベントごとのアクション（詳細表示、主催者にメッセージ、参加キャンセル）が利用できる
- [ ] プロフィール編集リンクが表示される

**優先度**: P0（必須）

#### 9. 通知システム

**ユーザーストーリー**:
ユーザーとして、重要なイベントの変更や申請状況を見逃さないために、適切な通知を受け取る機能が欲しい

**受け入れ条件**:
- [ ] アプリ内通知
  - ヘッダーに保留中の申請数バッジが表示される（主催者向け）
  - ヘッダーに未読チャット数バッジが表示される（全ユーザー向け）
- [ ] メール通知（以下のトリガー）
  - 新規申請 → 主催者へ
  - 申請承認 → 申請者へ
  - 申請拒否 → 申請者へ
  - イベントキャンセル → 承認済み参加者全員へ
  - 参加者キャンセル → 主催者へ
  - 新規チャットメッセージ → チャット相手へ

**優先度**: P0（必須）

#### 10. ブロック機能

**ユーザーストーリー**:
主催者として、不適切な参加者を管理するために、ユーザーをブロックする機能が欲しい

**受け入れ条件**:
- [ ] 主催者がユーザーをブロックできる
- [ ] ブロックされたユーザーはその主催者の全イベントへの申請が不可になる
- [ ] ブロックされたユーザーはチャットアクセスが制限される

**優先度**: P0（必須）

### 将来的な機能（Post-MVP）

#### 定期イベント自動作成
週次・月次で繰り返すイベントの自動作成機能

**優先度**: P2（できれば）

#### 参加者評価・レビュー
主催者による参加者評価、参加者によるイベント評価機能

**優先度**: P2（できれば）

#### イベントカレンダービュー
カレンダー形式でのイベント一覧表示

**優先度**: P2（できれば）

## 非機能要件

### パフォーマンス
- 初回ページロード: 3秒以内（3G回線）
- ページ遷移: 1秒以内
- イベント一覧表示: 100件まで1秒以内
- チャットメッセージ配信: 500ms以内

### ユーザビリティ
- モバイルファーストのレスポンシブデザイン
- 日時はすべてJST表示
- ページ遷移時のローディング表示
- 主要操作（イベント検索、申請）が3タップ以内で完了できる

### 信頼性
- サービス稼働率: 99.5%以上（月間）
- データバックアップ: 日次自動バックアップ
- エラー発生時のユーザーフレンドリーなメッセージ表示

### セキュリティ
- ユーザー認証: Supabase Authによるセキュアな認証
- RLS（Row Level Security）による適切なデータアクセス制御
- 入力値のバリデーションとサニタイズ
- HTTPS通信の強制

### スケーラビリティ
- 同時接続ユーザー数: 100人以上
- 登録イベント数: 10,000件以上
- 登録ユーザー数: 5,000人以上

## スコープ外

明示的にスコープ外とする項目:
- 宮城県以外の地域対応
- 決済機能（参加費のオンライン決済）
- ネイティブモバイルアプリ（PWA対応のWebアプリのみ）
- 大会・トーナメント管理機能
- チーム管理機能
- 多言語対応（日本語のみ）
